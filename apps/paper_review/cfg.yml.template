# config.yaml，文件格式必须严格遵循 yaml配置文件格式
sys:
    #  系统名称(title) 配置
    name: AI 数字评委
    #  是否启用认证， true， 登录后才能使用系统;false 无需登录
    auth: true
    #  自定义数据库配置时的权限认证 token
    cfg_tkn: foobar
    # 配置可访问的域， 防止跨域攻击
    allowed_origin: http://192,168.1.122
    # 对配置信息进行加密的密钥，长度必须为16/32
    cypher_key: abaababaabaababa
    # 在 debug 模式下定时任务将关闭，在生产环境下， debug_mode 必须设置为 false
    debug_mode: true
api:
    # 大语言模型 API 基地址
    llm_api_uri: https://api.deepseek.com/v1
    #  大语言模型 API key
    llm_api_key: 45678
    #  大语言模型 模型名称
    llm_model_name: deepseek-chat

    # embedding API 地址
    embedding_api_uri: https://api.deepseek.com/v1
    # embedding API Key
    embedding_api_key: sk-123456
    # embedding API name
    embedding_model_name: bge-m3

# 与向量库检索相关的参数配置
vdb:
    # 进行向两库检索的时候，判定为相似的相似度阈值，值域[0, 1]
    similar_threshold: 0.5

    # 最终返回的文本段的数量
    txt_num: 3

    # 文本分割的最大长度
    chunk_size: 300

    # 文本分割的重叠长度
    param chunk_overlap:

#  与大模型相关的提示词配置
prompts:

    # 基于知识库进行问答
    section_review_msg: |
        作为 {review_type} 评审专家，请严格按照评审标准对评审材料 "{review_topic}" 以下章节进行专业评审：

        【章节标题】
        {section_title}
        
        【章节内容】
        {section_content}
        
        【评审标准】
        {criteria}
        
        【参考材料】
        {reference}
        （请评审时，将章节内容与上述参考材料进行比对，作为评审的重要依据）
        
        请从以下维度进行专业评审：
        1. 内容完整性 - 是否涵盖必要要素，有无重大遗漏
        2. 论证逻辑性 - 论点论据是否合理，逻辑是否严密
        3. 数据充分性 - 数据是否详实，来源是否可靠，与参考材料是否吻合
        4. 专业规范性 - 是否符合行业规范和标准要求（尤其请对照参考材料中的相关规范）
        5. 风险识别度 - 风险分析是否全面客观
        
        请严格按照以下JSON格式返回评审结果：
        {{
            "score": 85,
            "strengths": ["优点1，如：...很好地参考了XX数据报告", "优点2"],
            "issues": ["具体问题1，可关联参考材料", "具体问题2"],
            "suggestions": ["具体、可操作的建议1，可指明参考方向", "建议2"],
            "risk_level": "低/中/高"
        }}
        
        请确保：
        - score为0-100的整数
        - strengths、issues、suggestions为数组格式
        - 问题描述要具体明确，尽可能引用参考材料作为依据
        - 建议要具有可操作性

    paper_review_msg: |
        作为 {review_type} 资深评审专家，请基于各章节评审结果，对评审材料 "{review_topic}" 进行整体评估：
      
        【各章节评审概要】
        {section_summary}
    
        【评审标准】
        {criteria}
    
        请从以下维度进行整体评估：
        1. 整体逻辑连贯性 - 各章节之间逻辑是否连贯，论证是否形成完整链条
        2. 前后论证一致性 - 前后数据、结论是否一致，有无矛盾之处
        3. 风险评估全面性 - 整体风险识别是否全面，应对措施是否有效
        4. 经济效益合理性 - 经济效益分析是否合理可信
        5. 报告整体质量 - 综合各章节评分给出整体评价
    
        请按照以下JSON格式返回评审结果：
        {{
            "overall_score": 85,
            "overall_strengths": ["优势1", "优势2"],
            "overall_issues": ["问题1", "问题2"],
            "key_recommendations": ["建议1", "建议2"],
            "review_summary": "整体评价摘要"
        }}
      
        请确保返回有效的JSON格式数据。

    fill_md_table_msg: |
        作为专业的 {review_type} 评审专家，请将评审材料 "{review_topic}" 的以下评审结果按照标准评审表格的格式进行填写：
      
        【标准评审表格格式】
        {criteria}

        【最终评审结果】
        {conclusion}

        请严格按照以下要求进行操作：
        1. 仔细分析标准评审表格的结构和内容要求
        2. 从最终评审结果中提取对应的评分、优点、问题、建议等信息
        3. 将提取的信息准确填写到标准评审表格的相应位置
        4. 保持表格原有的格式和结构不变
        5. 对于每个评审项，根据要求填写评分或评审意见
        6. 评审意见要基于最终评审结果中的具体内容，不能凭空编造
        7. 整体评分和总结部分也要相应填写

        请直接返回填充完整的标准评审表格内容，保持原有的Markdown表格格式。

    convert_markdown_to_html_msg: |
        你是一个专业的文档格式转换专家，擅长将Markdown表格转换为美观、结构清晰的HTML表格。

        ## 任务要求
        请将提供的Markdown表格内容转换为专业的HTML表格格式，要求：
        
        ### 格式要求：
        1. **表格结构**：保持原表格的列数和行数，正确处理合并单元格
        2. **样式设计**：
           - 使用现代、专业的CSS样式
           - 表头使用深色背景，白色文字
           - 表格行使用斑马纹交替背景色
           - 添加合适的边框和内边距
           - 文字居左对齐，数字居中对齐
        3. **层级关系**：通过缩进、字体大小或颜色体现内容的层级关系
        4. **关键信息突出**：对评分、重要结论等关键信息使用醒目的颜色
        5. **响应式设计**：确保在移动设备上也能良好显示
        
        ### 特殊处理：
        - 对于"*关键审查点"等标记，使用特殊图标或颜色突出显示
        - 评分部分使用颜色编码（如：高分绿色，中分黄色，低分红色）
        - 保持评审意见的可读性和专业性
        
        ### 输出要求：
        只输出完整的HTML代码，不要包含任何解释性文字。HTML代码应该包含内联CSS样式，确保可以直接使用。
        
        ## 输入内容：
        {markdown_content}
