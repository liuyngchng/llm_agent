<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{sys_name}}</title>
    <link rel="stylesheet" href="/static/chat.css">
    <link rel="stylesheet" href="/static/font-awesome.6.0.0.all.min.css">
    <link rel="stylesheet" href="/static/highlight.11.8.0.github.min.css">

</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-robot"></i>{{sys_name}}</h1>
            <div class="model-info">
                <span id="modelName">æ­£åœ¨åŠ è½½æ¨¡å‹ä¿¡æ¯...</span>
                <div class="model-info-actions">
                    <button id="clearChat" class="btn-clear">
                        <i class="fas fa-trash-alt"></i> æ¸…ç©ºèŠå¤©
                    </button>
                    <a href="/logout?uid={{uid}}&app_source={{app_source}}" class="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> é€€å‡º
                    </a>
                </div>
            </div>
        </header>

        <div class="chat-container">
            <div class="chat-history" id="chatHistory">
                <!-- èŠå¤©æ¶ˆæ¯ä¼šåŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
                <div class="welcome-message">
                    <p>ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ</p>
                </div>
            </div>

            <div class="input-area">
                <div class="input-container">
                    <div class="input-wrapper">
                        <!-- æ–‡ä»¶åˆ—è¡¨ - æ˜¾ç¤ºå·²é€‰æ‹©çš„æ–‡ä»¶ -->
                        <div class="file-list-container" id="fileListContainer" style="display: none;">
                            <div class="file-list-header">
                                <span>å·²é€‰æ‹©æ–‡ä»¶:</span>
                                <button class="clear-files-btn" onclick="clearFileList()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="file-list" id="fileList"></div>
                        </div>
                        <textarea id="messageInput" placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯..." rows="3"></textarea>
                    </div>

                    <div class="input-actions">
                        <div class="config-info">
                            <span class="config-item">
                                <i class="fas fa-brain"></i>
                                <span id="currentModel">-</span>
                            </span>
                            <span class="config-item">
                                <i class="fas fa-thermometer-half"></i>
                                <span id="currentTemp">{{ '%.1f'|format(config.temperature|default(0.7)) }}</span>
                            </span>
                        </div>
                        <div class="input-buttons">
                            <!-- ç®€æ´çš„æ–‡ä»¶ä¸Šä¼ æŒ‰é’® -->
                            <div class="file-upload-btn-container">
                                <input type="file" id="fileInput" multiple style="display: none;">
                                <button id="uploadButton" class="btn-attach" title="ä¸Šä¼ æ–‡ä»¶">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <div class="file-count-badge" id="fileCountBadge" style="display: none;">0</div>
                            </div>
                            <button id="sendButton" class="btn-send">
                                <i class="fas fa-paper-plane"></i> å‘é€
                            </button>
                        </div>
                    </div>
                </div>
                <div class="input-hint">
                    <small>æŒ‰ Enter å‘é€ï¼ŒShift + Enter æ¢è¡Œ â€¢ æ”¯æŒä¸Šä¼ æ–‡æœ¬ã€PDFã€å›¾ç‰‡ç­‰æ–‡ä»¶</small>
                </div>
            </div>
        </div>
        <input type="hidden" id ="uid" name="uid" value="{{uid}}">
        <input type="hidden" id ="t" name="t" value="{{t}}">

        <footer class="footer">
            <p>Powered by Richard</p>
        </footer>
    </div>

    <script type="text/javascript" src="/static/highlight.11.8.0.min.js"></script>
    <script type="text/javascript" src="/static/marked.min.js"></script>
    <script type="text/javascript" src="/static/highlight.11.8.0.javascript.min.js"></script>

    <script type="text/javascript" src="/static/highlight.11.8.0.python.min.js"></script>
    <script type="text/javascript" src="/static/highlight.11.8.0.sql.min.js"></script>
    <script type="text/javascript" src="/static/highlight.11.8.0.css.min.js"></script>
    <script type="text/javascript" src="/static/highlight.11.8.0.json.min.js"></script>
    <script type="text/javascript" src="/static/highlight.11.8.0.bash.min.js"></script>
    <script type="text/javascript" src="/static/chat.js"></script>
</body>
</html>