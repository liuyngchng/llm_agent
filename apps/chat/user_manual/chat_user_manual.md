<div align='center'><h1>AI聊天助手用户手册</h1></div>

------

## 系统简介

AI聊天系统是一个基于Flask框架构建的智能对话助手，支持：

- **智能对话**：使用先进的AI模型进行自然语言交互
- **文件解析**：上传多种格式文件并提取文本内容进行分析
- **流式响应**：实时显示AI生成的内容
- **多格式支持**：文本、PDF、Word、Excel、图片等

## 快速开始

### 访问方式

1. 在浏览器中访问系统网址（默认：`http://服务器IP:19000`）
2. 首次访问需要登录认证
3. 登录成功后进入主聊天界面

### 基本操作

1. 在底部输入框中输入问题或指令
2. 按回车或点击发送按钮
3. 等待AI生成回复
4. 查看实时显示的回复内容

## 界面功能

### 主界面布局

- **顶部栏**：系统标题和用户信息
- **中间区域**：聊天记录显示区
- **底部栏**：输入框和功能按钮

### 功能按钮

- **发送**：提交当前输入内容
- **清除**：清空聊天记录
- **上传文件**：打开文件选择对话框
- **设置**：查看当前配置信息

## 聊天功能

### 基础对话

- 直接在输入框中输入问题
- 支持多轮对话，系统会记住最近的10条历史记录
- 使用Markdown格式显示回复内容（支持代码高亮、表格等）

### 对话历史

- 系统自动保存对话历史
- 可查看之前的对话内容
- 历史记录在浏览器会话期间有效

### 特殊指令

系统内置以下功能：

- **文件分析**：上传文件后询问相关内容
- **代码解释**：AI可以解释和分析代码
- **问题解答**：回答各种知识性问题

## 文件上传

### 支持的文件格式

| 文件类型  | 扩展名                          | 说明                   |
| :-------- | :------------------------------ | :--------------------- |
| 文本文件  | `.txt`, `.md`                   | 纯文本文件             |
| 代码文件  | `.py`, `.js`                    | Python、JavaScript代码 |
| 网页文件  | `.html`, `.css`                 | 网页相关文件           |
| 数据文件  | `.json`                         | JSON格式数据           |
| PDF文档   | `.pdf`                          | PDF电子文档            |
| Excel文件 | `.xlsx`                         | Excel电子表格          |
| Word文档  | `.docx`                         | Word文档               |
| 图片文件  | `.jpg`, `.jpeg`, `.png`, `.gif` | 支持OCR文字识别        |

### 文件大小限制

- 最大文件大小：**10MB**
- 超过限制的文件将被拒绝上传

### 文件处理流程

1. 点击"上传文件"按钮
2. 选择本地文件
3. 系统自动上传并解析文件内容
4. 提取文本内容供AI分析
5. 临时文件自动清理

### 文件内容解析

- **文本文件**：直接读取内容
- **PDF文件**：提取所有页面文本
- **Word文档**：提取段落文本
- **Excel文件**：转换为Markdown表格格式
- **图片文件**：使用OCR识别文字

### 使用示例

text

```
请分析我刚上传的文档...
这个Excel表格中的数据说明了什么？
请总结PDF文档的主要内容...
```



## 配置说明

### 系统配置

- **模型名称**：当前使用的AI模型
- **最大token数**：限制回复长度（默认：8000）
- **温度参数**：控制回答的创造性（0.0-1.0）
- **API状态**：显示API连接状态

### 查看配置

访问系统设置或使用`/config`接口查看当前配置

### 环境变量配置

系统通过环境变量配置以下参数：

- `LLM_API_KEY`：API密钥
- `LLM_API_BASE_URL`：API基础URL
- `LLM_MODEL_NAME`：AI模型名称
- `MAX_TOKENS`：最大token数
- `TEMPERATURE`：温度参数
- `SYSTEM_PROMPT`：系统提示词

## 技术规格

### 系统架构

- **前端**：HTML + JavaScript + SSE（Server-Sent Events）
- **后端**：Python Flask框架
- **AI接口**：兼容OpenAI API的接口（默认使用DeepSeek）

### 性能特性

- **流式响应**：实时显示AI生成内容
- **并发处理**：支持多用户同时访问
- **会话管理**：基于IP和用户ID的会话验证
- **超时机制**：默认会话超时时间

### 安全特性

- **文件类型验证**：限制上传文件格式
- **文件大小限制**：防止大文件攻击
- **会话验证**：防止未授权访问
- **API密钥保护**：环境变量存储敏感信息

## 常见问题

### Q1: 为什么无法发送消息？

- 检查网络连接
- 确认已登录且会话未过期
- 查看浏览器控制台是否有错误信息

### Q2: 文件上传失败怎么办？

- 确认文件格式是否受支持
- 检查文件大小是否超过10MB
- 确保文件内容没有损坏

### Q3: AI回复速度慢是什么原因？

- 网络延迟
- AI模型处理复杂问题需要时间
- 服务器负载较高

### Q4: 如何获得更好的回复质量？

- 提供更详细的问题描述
- 上传相关文件供AI参考
- 使用更具体的提问方式

### Q5: 支持的编程语言有哪些？

- 系统主要支持Python
- AI可以理解和分析多种编程语言
- 代码解释支持语法高亮

## 故障排除

### 基础检查

1. **网络连接**：确认可以访问系统地址
2. **浏览器**：尝试使用Chrome/Firefox最新版本
3. **清除缓存**：清除浏览器缓存和Cookie

### 错误信息处理

| 错误信息           | 可能原因           | 解决方法                       |
| :----------------- | :----------------- | :----------------------------- |
| "消息不能为空"     | 发送了空消息       | 输入有效内容后再发送           |
| "不支持的文件类型" | 上传了不支持的格式 | 检查文件扩展名是否在支持列表中 |
| "文件太大"         | 超过10MB限制       | 压缩或分割文件                 |
| "API请求失败"      | API连接问题        | 检查网络和API配置              |
| "非法访问"         | 会话过期           | 重新登录系统                   |

### 系统状态检查

1. 访问 `/health` 端点检查服务状态
2. 查看系统日志了解详细错误
3. 联系系统管理员检查后端服务

### 依赖检查

系统需要以下Python库：

text

```
flask           # Web框架
requests        # HTTP请求
PyPDF2          # PDF解析（可选）
python-docx     # Word解析（可选）
openpyxl        # Excel解析（可选）
PIL+pytesseract # 图片OCR（可选）
```



## 最佳实践

### 提问技巧

1. **明确具体**：提供详细的上下文信息
2. **分步提问**：复杂问题分解为多个简单问题
3. **提供示例**：上传相关文件或给出具体例子

### 文件使用建议

1. **提前处理**：大文件先进行必要压缩
2. **格式优化**：确保文件格式清晰可读
3. **内容相关**：上传与问题直接相关的文件

### 性能优化

1. **合理提问**：避免过于复杂或模糊的问题
2. **使用历史**：利用对话历史提供上下文
3. **适时清理**：定期清除不必要的聊天记录

------

## 版本信息

- **当前版本**：v1.0
- **最后更新**：2025年
- **开发者**：liuyngchng@hotmail.com
- **许可证**：版权所有，保留所有权利

## 联系我们

如有问题或建议，请联系：

- 邮箱：liuyngchng@hotmail.com
- 系统管理员